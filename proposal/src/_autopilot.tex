\section{Autopilot}
\label{sec:autopilot}

In our struggle through implementing the speech discrimination task, I learned that the state of neuroscientific behavioral tooling had a big hole in it where an extensible, inexpensive, and distributed framework for behavioral experiments should be --- so I have spent the last five years trying to fill it\cite{saundersAutopilotAutomatingBehavioral2019}. Autopilot is a software package that also attempts to contend with the social realities of experimental work. To quote the \href{https://github.com/wehr-lab/autopilot/blob/main/README.md}{readme}:

\begin{quote}
As a tool, it provides researchers with a toolkit of flexible modules to design experiments without rigid programming \& API limitations. As a vision, it dreams of bridging the chaotic hacky creativity of scientific programmers with a standardized, communally developed library of reproducible experiment prototypes.
\end{quote}


There is far too much work that has gone into Autopilot to summarize here, but the essence of the design is that by using many small single-board computers that run a full operating system and a high-level language like python\footnote{as opposed to a microcontroller that runs code compiled/generated by the user-facing part of the software, which is the norm in engineering} that can interact with fast, low-level compiled libraries you can get all the speed you need while keeping the entire library within reach of anyone who uses it. By using the Raspberry Pi I wanted to allow people to use whatever off-the-shelf components they wanted to, rather than restricting it to a \href{https://sanworks.io/shop/products.php?productFamily=bpod}{small number of bespoke parts}, and be able to rely on and contribute to the large community of raspi users.

It's also designed with the knowledge that experimental software is often the first code that many researchers experience, and aims to scaffold that process and give good examples of code structure --- a process that is under continual development as I myself was learning to program while writing it, and only feel like I've reached a point of being comfort with best principles recently. Rather than a tool that's a black-box behind the scenes, Autopilot is intended to be understood at whatever level you want to engage with it: if you want to just use it as it is, that's fine, but if you want to dig into it the documentation tries to be exhaustive (and is currently a \href{https://docs.auto-pi-lot.com/_/downloads/en/latest/pdf/}{336 page book}, though the \href{https://docs.auto-pi-lot.com/en/latest/}{HTML docs} are considerably more manageable).

\begin{done}
Autopilot is \href{https://docs.auto-pi-lot.com/en/latest/guide/overview.html}{many things}, a sample of which for illustration include: 
\begin{itemize}
\item a library of \href{https://docs.auto-pi-lot.com/en/latest/hardware/index.html}{hardware} controllers, including \href{https://docs.auto-pi-lot.com/en/latest/hardware/cameras.html}{cameras}, \href{https://docs.auto-pi-lot.com/en/latest/hardware/gpio.html}{GPIO}-powered components, a few \href{https://docs.auto-pi-lot.com/en/latest/hardware/i2c.html}{sensors} like a 9-degree motion sensor and a 2D heat sensor, and a few more that I haven't had time to add yet.
\item \href{https://docs.auto-pi-lot.com/en/latest/networking/index.html}{Networking} modules that make it (increasingly) straightforward to link anything to anything else across computers, stream data, etc.
\item A realtime \href{https://docs.auto-pi-lot.com/en/latest/stim/sound/jackclient.html}{sound server} with \~millisecond latency and \~microsecond timestamp precision, as well as a collection of simple to use \href{https://docs.auto-pi-lot.com/en/latest/stim/sound/sounds.html}{sound} generation classes
\item A system for writing behavioral \href{https://docs.auto-pi-lot.com/en/latest/guide/task.html}{tasks}, including for experiments that need multiple shaping stages with programmatic \href{https://docs.auto-pi-lot.com/en/latest/tasks/graduation.html}{graduation} between them, and the ability to describe reusable, adaptable, and extensible \href{https://docs.auto-pi-lot.com/en/latest/tasks/nafc.html}{task prototypes} to avoid writing everything from scratch
\item A system of chainable realtime data \href{https://docs.auto-pi-lot.com/en/latest/transform/index.html}{transformations} that let you compose common \href{https://docs.auto-pi-lot.com/en/latest/transform/geometry.html}{geometric} algorithms, filters, unit conversions, and computer vision operations into reproducible pipelines that can be \href{https://docs.auto-pi-lot.com/en/latest/transform/index.html#autopilot.transform.make_transform}{programmatically reconstructed} on any machine. I also had the pleasure of collaborating with the DeepLabCut\cite{mathisDeepLabCutMarkerlessPose2018} team to incorporate realtime markerless pose tracking across the network into Autopilot\cite{kaneRealtimeLowlatencyClosedloop2020}
\item An extremely permissive \href{https://docs.auto-pi-lot.com/en/latest/guide/plugins.html}{plugin} system that lets people extend many parts of Autopilot and incorporate it naturally with the rest of the system without needing to directly modify the main library. In the next planned \href{https://github.com/wehr-lab/autopilot/milestone/2}{major version} "many parts" will become "all parts" and allow users to replace, rather than extend them as well.
\item An means of preserving exhaustive experimental \href{https://docs.auto-pi-lot.com/en/latest/core/subject.html}{provenance}, including every parameter change in every task that an experimental subject ever experiences and all the versions of the code that ran them, making exact experimental replication possible from a single file. Autopilot's separation of the logic of a task from its hardware implementation also makes replication possible without having exactly the same instrumentation.
\item A collection of tools to \href{https://docs.auto-pi-lot.com/en/latest/setup/index.html}{setup} and configure various parts of the occasionally-cantankerous raspi
\item A \href{https://docs.auto-pi-lot.com/en/latest/core/terminal.html}{GUI} that is at the moment an abomination in need of repair, and a \href{https://docs.auto-pi-lot.com/en/latest/guide/installation.html#configuration}{TUI}
\item A densely-linked, semantically tagged \href{https://wiki.auto-pi-lot.com/index.php/Autopilot_Wiki}{wiki} that integrates technical knowledge about hardware, task design, etc. with the software to use it. 
\item Dozens of my own hardware designs including \href{https://wiki.auto-pi-lot.com/index.php/3D_CAD}{3D CAD}, \href{https://wiki.auto-pi-lot.com/index.php/2D_CAD}{2D CAD}, and a few \href{https://wiki.auto-pi-lot.com/index.php/PCBs}{circuit boards}; along with a few (at the moment incomplete) \href{https://wiki.auto-pi-lot.com/index.php/Guides}{guides} to build them
\end{itemize}

All of which I did myself starting from zero programming experience at the start of the program. I'm quite proud of it.
\end{done}



> DLC collaboration \cite{kaneRealtimeLowlatencyClosedloop2020}

> Wiki and the future



\subsection{Interlude: The People's Ventilator Project}

> Description of project, the acute need for scientists to use their expertise for social good, and continuation of work from Autopilot \cite{lachancePVP1PeopleVentilator2020}